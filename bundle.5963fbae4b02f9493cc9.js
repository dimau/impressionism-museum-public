(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,r(n.key),n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,i){return(e=r(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function r(e){var i=function(e,i){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!==t(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===t(i)?i:String(i)}var o=function(){function t(){var i=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".stack-cards";e(this,t),s(this,"stackingCardsDOMElements",[]),s(this,"stackingCardsArray",[]),s(this,"_customEvent",new CustomEvent("resize-stack-cards")),this.stackingCardsDOMElements=document.querySelectorAll(n);var r="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,o=this.osHasReducedMotion();if(this.stackingCardsDOMElements.length>0&&r&&!o){this.stackingCardsArray=[];for(var l=0;l<this.stackingCardsDOMElements.length;l++)this.stackingCardsArray.push(new a(this.stackingCardsDOMElements[l]));var c=!1;window.addEventListener("resize",(function(){c&&clearTimeout(c),c=setTimeout((function(){return i.doneResizing()}),500)}))}}return n(t,[{key:"osHasReducedMotion",value:function(){if(!window.matchMedia)return!1;var t=window.matchMedia("(prefers-reduced-motion: reduce)");return!!t&&t.matches}},{key:"doneResizing",value:function(){for(var t=0;t<this.stackingCardsArray.length;t++)this.stackingCardsArray[t].element.dispatchEvent(this._customEvent)}}]),t}(),a=function(){function t(i){e(this,t),this.element=i,this.items=this.element.getElementsByClassName("stack-cards__item"),this.scrollingFn=!1,this.scrolling=!1,this.initStackCardsEffect(),this.initStackCardsResize()}return n(t,[{key:"initStackCardsEffect",value:function(){var t=this;this.setStackCards(),new IntersectionObserver((function(e){return t.stackCardsCallback(e)}),{threshold:[0,1]}).observe(this.element)}},{key:"initStackCardsResize",value:function(){var t=this;this.element.addEventListener("resize-stack-cards",(function(){t.setStackCards(),t.animateStackCards()}))}},{key:"stackCardsCallback",value:function(t){if(t[0].isIntersecting){if(this.scrollingFn)return;this.scrollingFn=this.stackCardsScrolling.bind(this),window.addEventListener("scroll",this.scrollingFn)}else{if(!this.scrollingFn)return;window.removeEventListener("scroll",this.scrollingFn),this.scrollingFn=!1}}},{key:"stackCardsScrolling",value:function(){var t=this;this.scrolling||(this.scrolling=!0,window.requestAnimationFrame((function(){return t.animateStackCards()})))}},{key:"setStackCards",value:function(){this.marginY=getComputedStyle(this.element).getPropertyValue("--stack-cards-gap"),this.getIntegerFromProperty(),this.elementHeight=this.element.offsetHeight;var t=getComputedStyle(this.items[0]);this.cardTop=Math.floor(parseFloat(t.getPropertyValue("top"))),this.cardHeight=Math.floor(parseFloat(t.getPropertyValue("height"))),this.windowHeight=window.innerHeight,isNaN(this.marginY)?this.element.style.paddingBottom="0px":this.element.style.paddingBottom=this.marginY*(this.items.length-1)+"px";for(var e=0;e<this.items.length;e++)isNaN(this.marginY)?this.items[e].style.transform="none;":this.items[e].style.transform="translateY("+this.marginY*e+"px)"}},{key:"getIntegerFromProperty",value:function(){var t=document.createElement("div");t.setAttribute("style","opacity: 0; visibility: hidden; position: absolute; height: "+this.marginY),this.element.appendChild(t),this.marginY=parseInt(getComputedStyle(t).getPropertyValue("height")),this.element.removeChild(t)}},{key:"animateStackCards",value:function(){if(isNaN(this.marginY))this.scrolling=!1;else{var t=this.element.getBoundingClientRect().top;if(this.cardTop-t+this.element.windowHeight-this.elementHeight-this.cardHeight+this.marginY+this.marginY*this.items.length>0)this.scrolling=!1;else{for(var e=0;e<this.items.length;e++){var i=this.cardTop-t-e*(this.cardHeight+this.marginY);if(i>0){var n=e===this.items.length-1?1:(this.cardHeight-.05*i)/this.cardHeight;this.items[e].style.transform="translateY("+this.marginY*e+"px) scale("+n+")"}else this.items[e].style.transform="translateY("+this.marginY*e+"px)"}this.scrolling=!1}}}}]),t}();function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,s=function(t,e){if("object"!==l(t)||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===l(s)?s:String(s)),n)}var s}var h=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),e?(this._el="string"==typeof e?document.querySelector(e):e,this._config=Object.assign({alwaysOpen:!0,duration:350},i),this.addEventListener()):console.warn("Accordion component is downloaded, but can't be applied")}var e,i;return e=t,(i=[{key:"addEventListener",value:function(){var t=this;this._el.addEventListener("click",(function(e){var i=e.target.closest(".accordion__header");if(i){if(!t._config.alwaysOpen){var n=t._el.querySelector(".accordion__item_show");n&&n!==i.parentElement&&t.toggle(n)}t.toggle(i.parentElement)}}))}},{key:"show",value:function(t){var e=t.querySelector(".accordion__body");if(!e.classList.contains("collapsing")&&!t.classList.contains("accordion__item_show")){e.style.display="block";var i=e.offsetHeight;e.style.height=0,e.style.overflow="hidden",e.style.transition="height ".concat(this._config.duration,"ms ease"),e.classList.add("collapsing"),t.classList.add("accordion__item_slidedown"),e.offsetHeight,e.style.height="".concat(i,"px"),window.setTimeout((function(){e.classList.remove("collapsing"),t.classList.remove("accordion__item_slidedown"),e.classList.add("collapse"),t.classList.add("accordion__item_show"),e.style.display="",e.style.height="",e.style.transition="",e.style.overflow=""}),this._config.duration)}}},{key:"hide",value:function(t){var e=t.querySelector(".accordion__body");!e.classList.contains("collapsing")&&t.classList.contains("accordion__item_show")&&(e.style.height="".concat(e.offsetHeight,"px"),e.offsetHeight,e.style.display="block",e.style.height=0,e.style.overflow="hidden",e.style.transition="height ".concat(this._config.duration,"ms ease"),e.classList.remove("collapse"),t.classList.remove("accordion__item_show"),e.classList.add("collapsing"),window.setTimeout((function(){e.classList.remove("collapsing"),e.classList.add("collapse"),e.style.display="",e.style.height="",e.style.transition="",e.style.overflow=""}),this._config.duration))}},{key:"toggle",value:function(t){t.classList.contains("accordion__item_show")?this.hide(t):this.show(t)}}])&&c(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();new o(".stack-cards"),new h(document.querySelector(".accordion"),{alwaysOpen:!1})})();